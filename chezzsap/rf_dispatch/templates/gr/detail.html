{% extends "base.html" %} {% block content %}
<div class="container mt-4">
  <!-- GR Header Card -->
  <div class="card shadow-lg border-0 rounded-3">
    <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
      <h4 class="mb-0"><i class="fas fa-receipt"></i> Goods Receipt: {{ gr.gr_no }}</h4>
      <span class="badge bg-light text-dark"> Inbound: {{ gr.inbound_delivery.inbound_delivery_number }} </span>
    </div>

    <div class="card-body">
      <!-- Info Section -->
      <div class="row mb-4">
        <div class="col-md-6">
          <p><i class="fas fa-user"></i> <strong>Posted By:</strong> {{ gr.posted_by }}</p>
          <p><i class="fas fa-calendar-alt"></i> <strong>Posted At:</strong> {{ gr.posting_date|date:"d M Y" }}</p>
        </div>
        <div class="col-md-6">
          <p><i class="fas fa-sticky-note"></i> <strong>Remarks:</strong> {{ gr.remarks|default:"-" }}</p>
          <p><i class="fas fa-truck"></i> <strong>Supplier:</strong> {{ gr.inbound_delivery.supplier.name }}</p>
        </div>
      </div>

      <!-- Products Table -->
      <h5 class="mb-3"><i class="fas fa-boxes"></i> Products</h5>
      {% if gr.inbound_delivery.products.exists %}
      <div class="table-responsive">
        <table class="table table-bordered table-striped align-middle text-center">
          <thead class="table-dark">
            <tr>
              <th>#</th>
              <th>Product</th>
              <th>Quantity Received</th>
              <th>UOM</th>
              <th>Batch</th>
            </tr>
          </thead>
          <tbody>
            {% for item in gr.inbound_delivery.products.all %}
            <tr>
              <td>{{ forloop.counter }}</td>
              <td>{{ item.product.name }}</td>
              <td>{{ item.quantity_received }}</td>
              <td>{{ item.unit_of_measure }}</td>
              <td>{{ item.batch_number }}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
      {% else %}
      <div class="alert alert-info text-center"><i class="fas fa-exclamation-circle"></i> No products found for this GR.</div>
      {% endif %}
    </div>
  </div>

  <!-- Back Button -->
  <div class="mt-3">
    <a href="{% url 'gr_list' %}" class="btn btn-secondary"> <i class="fas fa-arrow-left"></i> Back to GR List </a>
  </div>
</div>

{% endblock %}
