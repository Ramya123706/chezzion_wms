{% extends "base.html" %} {% block content %}
<div class="container mt-5">
  <div class="card shadow">
    <div class="card-header bg-primary text-white text-center">
      <h4><i class="fas fa-tasks me-2"></i> Pending Putaway Tasks</h4>
    </div>
    <div class="card-body">
      {% if pending_tasks %}
      <div class="table-responsive">
        <table class="table table-bordered table-striped text-center align-middle">
          <thead class="table-light">
            <tr>
              <th><i class="fas fa-hashtag"></i> Putaway ID</th>
              <th><i class="fas fa-boxes"></i> Pallet</th>
              <th><i class="fas fa-map-marker-alt"></i> Location</th>
              <th><i class="fas fa-tasks"></i> Task Type</th>
              <th><i class="fas fa-info-circle"></i> Status</th>
              <th><i class="fas fa-cogs"></i> Actions</th>
            </tr>
          </thead>
          <tbody>
            {% for task in pending_tasks %}
            <tr>
              <!-- Putaway ID links to detail page -->
              <td>
                <a href="{% url 'putaway_detail' task.putaway_id %}" class="text-decoration-none"> {{ task.putaway_id }} </a>
              </td>
              <td>{{ task.pallet }}</td>
              <td>{{ task.location }}</td>
              <td>{{ task.putaway_task_type }}</td>
              <td>
                <span
                  class="badge {% if task.status == 'Completed' %}bg-success {% elif task.status == 'In Progress' %}bg-warning text-dark {% else %}bg-secondary{% endif %}">
                  {{ task.status }}
                </span>
              </td>
              <td class="d-flex justify-content-center gap-1">
                <a href="{% url 'edit_putaway' task.putaway_id %}" class="btn btn-sm btn-primary" title="Edit Task">
                  <i class="fas fa-edit"></i>
                </a>
                <a
                  href="{% url 'confirm_putaway' task.putaway_id %}"
                  class="btn btn-sm {% if task.status == 'In Progress' %}btn-success{% else %}btn-warning{% endif %}"
                  title="{% if task.status == 'In Progress' %}Mark Completed{% else %}Mark In Progress{% endif %}"
                  onclick="return confirm('Are you sure you want to update this task?');">
                  {% if task.status == 'In Progress' %}<i class="fas fa-check-circle"></i>{% else %}<i class="fas fa-undo-alt"></i>{% endif %}
                </a>
                <a
                  href="{% url 'delete_putaway' task.putaway_id %}"
                  class="btn btn-sm btn-danger"
                  title="Delete Task"
                  onclick="return confirm('Are you sure you want to delete this task?');">
                  <i class="fas fa-trash"></i>
                </a>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
      {% else %}
      <p class="text-center text-muted"><i class="fas fa-info-circle me-2"></i> No pending tasks available.</p>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
