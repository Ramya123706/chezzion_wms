{% extends "base.html" %}
{% block content %}
<div class="container py-5">
  <div class="card mx-auto shadow-lg border-0 rounded-4 overflow-hidden" style="max-width: 700px">

    <!-- Product Image -->
    {% if product.images %}
    <div class="bg-light text-center p-3">
      <img src="{{ product.images.url }}" class="img-fluid rounded shadow-sm" alt="Product Image" style="max-height: 250px" />
    </div>
    {% else %}
    <div class="bg-light text-center p-5 text-muted">
      <i class="fa-solid fa-box-open fa-3x mb-2"></i><br />
      No image uploaded for this product.
    </div>
    {% endif %}

    <!-- Header -->
    <div class="card-header text-center bg-primary text-white">
      <h4 class="mb-0"><i class="fa-solid fa-cube me-2"></i> Product Details</h4>
    </div>

    <!-- Details Table -->
    <div class="table-responsive">
      <table class="table table-striped align-middle mb-0">
        <tbody>
          <tr>
            <th><i class="fa-solid fa-barcode me-2 text-secondary"></i> Product ID</th>
            <td>{{ product.product_id }}</td>
          </tr>
          <tr>
            <th><i class="fa-solid fa-box me-2 text-secondary"></i> Product Name</th>
            <td>{{ product.name }}</td>
          </tr>
          <tr>
            <th><i class="fa-solid fa-layer-group me-2 text-secondary"></i> Quantity</th>
            <td>{{ product.quantity }}</td>
          </tr>
          <tr>
            <th><i class="fa-solid fa-tag me-2 text-secondary"></i> Unit Price</th>
            <td>₹ {{ product.unit_price }}</td>
          </tr>
          <tr>
  <th><i class="fa-solid fa-pallet me-2 text-secondary"></i> Pallet No</th>
  <td>
    {% if product.pallet_no %}
      {{ product.pallet_no.pallet_no}}
    {% else %}
      N/A
    {% endif %}
  </td>
</tr>
<tr>
  <th><i class="fa-solid fa-warehouse me-2 text-secondary"></i> Warehouse</th>
  <td>
    {% if product.whs_no %}
      {{ product.whs_no.whs_no }}- {{ product.whs_no.whs_name }}
    {% else %}
      N/A
    {% endif %}
  </td>
</tr>

          <tr>
            <th><i class="fa-solid fa-barcode me-2 text-secondary"></i> SKU</th>
            <td>{{ product.sku }}</td>
          </tr>
          <tr>
            <th><i class="fa-solid fa-location-dot me-2 text-secondary"></i> Location</th>
            <td>{{ product.location }}</td>
          </tr>
          <!-- Purchase Orders -->
          <tr>
            <th><i class="fa-solid fa-file-invoice-dollar me-2 text-secondary"></i> Purchase Orders</th>
            <td>
              {% if product.purchaseitem_set.exists %}
              <ul class="list-unstyled mb-0">
                {% for item in product.purchaseitem_set.all %}
                <li class="mb-2">
                  <i class="fa-solid fa-hashtag text-muted"></i> <strong>PO No:</strong> {{ item.purchase_order.po_number }} <br />
                  <i class="fa-regular fa-calendar text-muted"></i> <strong>Date:</strong> {{ item.purchase_order.po_date }} <br />
                  <i class="fa-solid fa-boxes-stacked text-muted"></i> <strong>Qty:</strong> {{ item.quantity }} at ₹ {{ item.unit_price }}
                </li>
                <hr class="my-2" />
                {% endfor %}
              </ul>
              {% else %}
              <span class="text-muted">No purchase orders found.</span>
              {% endif %}
            </td>
          </tr>
          <tr>
            <th><i class="fa-regular fa-file-lines me-2 text-secondary"></i> Description</th>
            <td>{{ product.description }}</td>
          </tr>
          <tr>
            <th><i class="fa-solid fa-tags me-2 text-secondary"></i> Category</th>
            <td>{{ product.category }}</td>
          </tr>
          <tr>
            <th><i class="fa-solid fa-diagram-project me-2 text-secondary"></i> Sub Category</th>
            <td>{{ product.sub_category }}</td>
          </tr>
          <tr>
            <th><i class="fa-solid fa-ruler me-2 text-secondary"></i> Unit of Measure</th>
            <td>{{ product.unit_of_measure }}</td>
          </tr>
          <tr>
            <th><i class="fa-solid fa-bell me-2 text-secondary"></i> Reorder Level</th>
            <td>{{ product.re_order_level }}</td>
          </tr>
          <tr>
            <th><i class="fa-regular fa-clock me-2 text-secondary"></i> Created At</th>
            <td>{{ product.created_at }}</td>
          </tr>
          <tr>
            <th><i class="fa-regular fa-pen-to-square me-2 text-secondary"></i> Updated At</th>
            <td>{{ product.updated_at }}</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Action Buttons -->
    <div class="text-center p-4">
      <a href="{% url 'product_edit' product.product_id %}" class="btn btn-primary me-2">
        <i class="fa-solid fa-pen-to-square me-1"></i> Edit
      </a>
      <a href="{% url 'add_product' %}" class="btn btn-secondary">
        <i class="fa-solid fa-arrow-left me-1"></i> F7 BACK
      </a>
    </div>
  </div>
</div>
{% endblock %}
