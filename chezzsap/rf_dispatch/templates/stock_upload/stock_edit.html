{% extends "base.html" %}

{% block content %}
<div class="container d-flex justify-content-center align-items-center" style="min-height: 100vh;">
    <div class="row w-100 justify-content-center">
        <!-- Main Form Column -->
        <div class="col-md-6">
            <div class="card shadow-lg">
                <div class="card-header text-center bg-primary text-white">
                    <h5>Edit Stock</h5>
                </div>
                <div class="card-body">
                    <!-- <div class="mb-3 text-center">
                        <img src="https://chezzion.com/wp-content/themes/chezzion-2025/assets/images/logo.png" width="50" alt="SAP logo">
                    </div> -->

                    {% if messages %}
                        {% for message in messages %}
                            <div class="alert alert-{{ message.tags }}">{{ message }}</div>
                        {% endfor %}
                    {% endif %}

                    <form method="post">
                        {% csrf_token %}

                        <!-- Warehouse -->
                        <div class="form-group">
                            <label><b>Warehouse</b></label>
                            <select name="whs_no" class="form-control">
  {% for wh in warehouse %}
    <option value="{{ wh.id }}" {% if stock.whs_no.id == wh.id %}selected{% endif %}>
      {{ wh.whs_no }}
    </option>
  {% endfor %}
</select>
                        </div>

                        <!-- Product -->
                        <div class="form-group">
                            <label for="product"><b>Product</b></label>
                            <input type="text" class="form-control" id="product" name="product" value="{{ stock.product }}" required>
                        </div>

                        <!-- Category -->
                        <div class="form-group">
                            <label for="category"><b>Category</b></label>
                            <input type="text" id="category" name="category" class="form-control" value="{{ stock.category }}">
                        </div>

                        <!-- Subcategory -->
                        <div class="form-group">
                            <label for="sub_category"><b>Subcategory</b></label>
                            <input type="text" id="sub_category" name="sub_category" class="form-control" value="{{ stock.sub_category }}">
                        </div>

                        <!-- Description -->
                        <div class="form-group">
                            <label for="description"><b>Description</b></label>
                            <input type="text" class="form-control" id="description" name="description" value="{{ stock.description }}" required>
                        </div>

                        <!-- Quantity -->
                        <div class="form-group">
                            <label for="quantity"><b>Quantity</b></label>
                            <input type="number" class="form-control" id="quantity" name="quantity" value="{{ stock.quantity }}" required>
                        </div>

                        <!-- BIN -->
                        <div class="form-group">
                            <label for="bin"><b>BIN</b></label>
                            <input type="text" class="form-control" id="bin" name="bin" value="{{ stock.bin.bin_id }}">
                        </div>

                        <!-- Pallet -->
                        <div class="form-group">
                            <label for="pallet"><b>Pallet</b></label>
                            <input type="text" class="form-control" id="pallet" name="pallet" value="{{ stock.pallet }}" required>
                        </div>

                        <!-- P_mat -->
                        <div class="form-group">
                            <label for="p_mat"><b>P_mat</b></label>
                            <select class="form-control" id="p_mat" name="p_mat" required>
                                {% for mat in materials %}
                                    <option value="{{ mat.id }}" {% if mat.id == stock.p_mat.id %}selected{% endif %}>
                                        {{ mat.p_mat }}
                                    </option>
                                {% endfor %}
                            </select>
                        </div>

                        <!-- Inspection -->
                        <div class="form-group">
                            <label for="inspection"><b>Inspection</b></label>
                            <input type="text" class="form-control" id="inspection" name="inspection" value="{{ stock.inspection }}" required>
                        </div>

                        <!-- Stock Type -->
                        <div class="form-group">
                            <label for="stock_type"><b>Stock Type</b></label>
                            <select class="form-control" id="stock_type" name="stock_type" required>
                                <option value="Quality" {% if stock.stock_type == "Quality" %}selected{% endif %}>Quality</option>
                                <option value="Blocked" {% if stock.stock_type == "Blocked" %}selected{% endif %}>Blocked</option>
                                <option value="Scrapped" {% if stock.stock_type == "Scrapped" %}selected{% endif %}>Scrapped</option>
                                <option value="Unrestricted" {% if stock.stock_type == "Unrestricted" %}selected{% endif %}>Unrestricted</option>
                            </select>
                        </div>

                        <!-- WPS -->
                        <div class="form-group">
                            <label for="wps"><b>WPS</b></label>
                            <input type="text" class="form-control" id="wps" name="wps" value="{{ stock.wps }}" required>
                        </div>

                        <!-- Doc No -->
                        <div class="form-group">
                            <label for="doc_no"><b>Doc No</b></label>
                            <input type="text" class="form-control" id="doc_no" name="doc_no" value="{{ stock.doc_no }}" required>
                        </div>

                        <!-- Pallet Status -->
                        <div class="form-group">
                            <label for="pallet_status"><b>Pallet Status</b></label>
                            <select class="form-control" id="pallet_status" name="pallet_status" required>
                                <option value="Received" {% if stock.pallet_status == "Received" %}selected{% endif %}>Received</option>
                                <option value="Planned" {% if stock.pallet_status == "Planned" %}selected{% endif %}>Planned</option>
                                <option value="Damaged" {% if stock.pallet_status == "Damaged" %}selected{% endif %}>Damaged</option>
                                <option value="Rejected" {% if stock.pallet_status == "Rejected" %}selected{% endif %}>Rejected</option>
                            </select>
                        </div>

                        <!-- Buttons -->
                        <div class="d-flex justify-content-between mt-4">
                            <a href="{% url 'stock_list' %}" class="btn btn-secondary">Back</a>
                            <button type="submit" class="btn btn-primary">Update Stock</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
