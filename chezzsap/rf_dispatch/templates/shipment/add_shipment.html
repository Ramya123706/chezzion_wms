{% extends "base.html" %}
{% block content %}

<div class="container mt-5">
  <h2>Add New Shipment</h2>

  <!-- Display messages -->
  {% if messages %}
    {% for message in messages %}
      <div class="alert {% if message.tags %}alert-{{ message.tags }}{% else %}alert-info{% endif %}" role="alert">
        {{ message }}
      </div>
    {% endfor %}
  {% endif %}

  <form method="POST">
    {% csrf_token %}

    <div class="mb-3">
      <label class="form-label">Truck Number</label>
      <select name="truck_number" required>
        {% for truck in available_trucks %}
            <option value="{{ truck.id }}">{{ truck.truck_no }}</option>
        {% endfor %}
    </select>
    </div>

    <div class="mb-3">
      <label class="form-label">Yard Scan Code</label>
      <select name="yard" required>
        {% for yard in yards %}
            <option value="{{ yard.id }}">{{ yard.whs_no }}</option>
        {% endfor %}
    </select>
    </div>

    <div class="mb-3">
      <label class="form-label">Planned Dispatch</label>
      <input type="date" name="planned_dispatch" class="form-control" required>
    </div>
  

    <div class="mb-3">
      <label class="form-label">Status</label>
      <select name="status" class="form-select" required>
        <option value="Planned">Planned</option>
        <option value="Assigned">Assigned</option>
        <option value="Confirmed">Confirmed</option>
        <option value="Completed">Completed</option>
      </select>
    </div>
    <div class="mb-3">
      <label class="form-label">Select PGIs</label>
      <select name="pgis" multiple>
        {% for pgi in unassigned_pgis %}
            <option value="{{ pgi.id }}">{{ pgi.pgi_no }}</option>
        {% endfor %}
    </select>
    </div>

    <button type="submit" class="btn btn-primary">Save Shipment</button>
    <a href="{% url 'shipment_dashboard' %}" class="btn btn-secondary">Cancel</a>
  </form>
</div>

{% endblock %}
