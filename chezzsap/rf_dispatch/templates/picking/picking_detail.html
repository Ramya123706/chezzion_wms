{% extends "base.html" %}

{% block content %}
<div class="container mt-5">
    <div class="card shadow-lg">
        <div class="card-header bg-success text-white text-center">
            <h4>Picking Task Details</h4>
        </div>
        <div class="card-body">
            <table class="table table-bordered">
                <tr>
                    <th>Picking ID</th>
                    <td>{{ task.picking_id }}</td>
                </tr>
                <tr>
                    <th>Pallet</th>
                    <td>{{ task.pallet }}</td>
                </tr>
                <tr>
                    <th>Source Location</th>
                    <td>{{ task.source_location }}</td>
                </tr>
                 <tr>
                    <th>Destination Location</th>
                    <td>{{ task.destination_location }}</td>
                </tr>
                <tr>
                    <th>Product</th>
                    <td>{{ task.product }}</td>
                </tr>
                <tr>
                    <th>Quantity</th>
                    <td>{{ task.quantity }}</td>
                </tr>
                <tr>
                    <th>Picking Type</th>
                    <td>{{ task.picking_type }}</td>
                </tr>
                <tr>
                    <th>Status</th>
                    <td>
                        <span class="badge 
                            {% if task.status == 'Completed' %} bg-success
                            {% elif task.status == 'In Progress' %} bg-warning text-dark
                            {% else %} bg-secondary {% endif %}">
                            {{ task.status }}
                        </span>
                    </td>
                </tr>

                <!-- ðŸ”¹ Audit Information -->
                <tr>
                    <th>Created By</th>
                    <td>{{ task.created_by }}</td>
                </tr>
                <tr>
                    <th>Created At</th>
                    <td>{{ task.created_at|date:"Y-m-d H:i" }}</td>
                </tr>
                <tr>
                    <th>Updated By</th>
                    <td>{{ task.updated_by }}</td>
                </tr>
                <tr>
                    <th>Updated At</th>
                    <td>{{ task.updated_at|date:"Y-m-d H:i" }}</td>
                </tr>
            </table>
        </div>
        <div class="card-footer text-center">
            <a href="{% url 'all_tasks' %}" class="btn btn-secondary">Back to All Tasks</a>
            {% if task.status != "Completed" %}
                <a href="{% url 'confirm_picking' task.picking_id %}" 
                   class="btn btn-success"
                   onclick="return confirm('Are you sure to mark this task as Completed?');">
                   Mark Completed
                </a>
            {% endif %}
            
    <form action="{% url 'delete_picking' task.picking_id %}" method="post" style="display:inline;">
        {% csrf_token %}
        <button type="submit" class="btn btn-danger"
                onclick="return confirm('Are you sure you want to delete this picking task?');">
            Delete
        </button>
    </form>
        </div>
    </div>
</div>
{% endblock %}
